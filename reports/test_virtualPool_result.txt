No files changed, compilation skipped

Ran 14 tests for test/virtualPool.t.sol:VirtualPoolTest
[PASS] test_AddLiquidity() (gas: 285741)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [285741] VirtualPoolTest::test_AddLiquidity()
    ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should be from supported country") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [218543] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0)
    │   ├─ [213697] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [53308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   │   │   ├─ [52986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 1000000000000000000000 [1e21], amount1: 750000000000000000000 [7.5e20], liquidity: 866025403784438646763 [8.66e20])
    │   │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(1000000000000000000000 [1e21], 1000000000000000000000 [1e21]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(750000000000000000000 [7.5e20], 750000000000000000000 [7.5e20]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertTrue(true) [staticcall]
    │   └─ ← [Return] 
    ├─ [2501] ERC1967Proxy::getReserves(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [2182] VirtualPool::getReserves(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20]
    │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20]
    ├─ [0] VM::assertEq(1000000000000000000000 [1e21], 1000000000000000000000 [1e21]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(750000000000000000000 [7.5e20], 750000000000000000000 [7.5e20]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_AddLiquidity_NonKYC() (gas: 193199)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [193199] VirtualPoolTest::test_AddLiquidity_NonKYC()
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [47242] ERC1967Proxy::mintRwa(ECAdd: [0x0000000000000000000000000000000000000006], 1000000000000000000000000 [1e24])
    │   ├─ [42429] RwaToken::mintRwa(ECAdd: [0x0000000000000000000000000000000000000006], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [7702] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ECAdd: [0x0000000000000000000000000000000000000006], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [40242] ERC1967Proxy::mintRwa(ECAdd: [0x0000000000000000000000000000000000000006], 1000000000000000000000000 [1e24])
    │   ├─ [35429] RwaToken::mintRwa(ECAdd: [0x0000000000000000000000000000000000000006], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ECAdd: [0x0000000000000000000000000000000000000006], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECAdd: [0x0000000000000000000000000000000000000006])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: ECAdd: [0x0000000000000000000000000000000000000006], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ECAdd: [0x0000000000000000000000000000000000000006], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(KYCNotVerified(0x0000000000000000000000000000000000000006))
    │   └─ ← [Return] 
    ├─ [21052] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0)
    │   ├─ [16208] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0) [delegatecall]
    │   │   ├─ [1432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   │   │   ├─ [1119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   └─ ← [Revert] KYCNotVerified(0x0000000000000000000000000000000000000006)
    │   └─ ← [Revert] KYCNotVerified(0x0000000000000000000000000000000000000006)
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_AddLiquidity_Slippage() (gas: 408536)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [408536] VirtualPoolTest::test_AddLiquidity_Slippage()
    ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should be from supported country") [staticcall]
    │   └─ ← [Return] 
    ├─ [5894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should be from supported country") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [218543] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0)
    │   ├─ [213697] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [53308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   │   │   ├─ [52986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 1000000000000000000000 [1e21], amount1: 750000000000000000000 [7.5e20], liquidity: 866025403784438646763 [8.66e20])
    │   │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 500000000000000000000 [5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 500000000000000000000 [5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 500000000000000000000 [5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 400000000000000000000 [4e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 400000000000000000000 [4e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 400000000000000000000 [4e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(InsufficientAmount())
    │   └─ ← [Return] 
    ├─ [15982] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 500000000000000000000 [5e20], 400000000000000000000 [4e20], 500000000000000000000 [5e20], 400000000000000000000 [4e20])
    │   ├─ [15641] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 500000000000000000000 [5e20], 400000000000000000000 [4e20], 500000000000000000000 [5e20], 400000000000000000000 [4e20]) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   └─ ← [Revert] InsufficientAmount()
    │   └─ ← [Revert] InsufficientAmount()
    ├─ [64482] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 500000000000000000000 [5e20], 400000000000000000000 [4e20], 0, 375000000000000000000 [3.75e20])
    │   ├─ [64136] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 500000000000000000000 [5e20], 400000000000000000000 [4e20], 0, 375000000000000000000 [3.75e20]) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [21408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 500000000000000000000 [5e20])
    │   │   │   ├─ [21086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 500000000000000000000 [5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 500000000000000000000 [5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [21408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 375000000000000000000 [3.75e20])
    │   │   │   ├─ [21086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 375000000000000000000 [3.75e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 375000000000000000000 [3.75e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: ModExp: [0x0000000000000000000000000000000000000005], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 500000000000000000000 [5e20], amount1: 375000000000000000000 [3.75e20], liquidity: 433012701892219323381 [4.33e20])
    │   │   └─ ← [Return] 500000000000000000000 [5e20], 375000000000000000000 [3.75e20], 433012701892219323381 [4.33e20]
    │   └─ ← [Return] 500000000000000000000 [5e20], 375000000000000000000 [3.75e20], 433012701892219323381 [4.33e20]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(500000000000000000000 [5e20], 500000000000000000000 [5e20]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertTrue(true) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertTrue(true) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_EmergencyWithdraw() (gas: 334296)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [334296] VirtualPoolTest::test_EmergencyWithdraw()
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [233543] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0)
    │   ├─ [228697] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 1000000000000000000000 [1e21], amount1: 750000000000000000000 [7.5e20], liquidity: 866025403784438646763 [8.66e20])
    │   │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] 1000000000000000000000 [1e21]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    ├─ [0] VM::assertEq(1000000000000000000000 [1e21], 1000000000000000000000 [1e21], "Initial pool balance should match added liquidity") [staticcall]
    │   └─ ← [Return] 
    ├─ [2923] ERC1967Proxy::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   ├─ [2610] RwaToken::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [47994] ERC1967Proxy::emergencyWithdraw(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 500000000000000000000 [5e20])
    │   ├─ [47681] VirtualPool::emergencyWithdraw(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 500000000000000000000 [5e20]) [delegatecall]
    │   │   ├─ [43943] ERC1967Proxy::transfer(ECRecover: [0x0000000000000000000000000000000000000001], 500000000000000000000 [5e20])
    │   │   │   ├─ [43627] RwaToken::transfer(ECRecover: [0x0000000000000000000000000000000000000001], 500000000000000000000 [5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ECRecover: [0x0000000000000000000000000000000000000001], value: 500000000000000000000 [5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   └─ ← [Return] 500000000000000000000 [5e20]
    │   └─ ← [Return] 500000000000000000000 [5e20]
    ├─ [0] VM::assertEq(500000000000000000000 [5e20], 500000000000000000000 [5e20], "Admin should receive withdraw amount") [staticcall]
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] 500000000000000000000 [5e20]
    │   └─ ← [Return] 500000000000000000000 [5e20]
    ├─ [0] VM::assertEq(500000000000000000000 [5e20], 500000000000000000000 [5e20], "Pool balance should be reduced by withdrawn amount") [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_FeeManagement() (gas: 458981)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [458981] VirtualPoolTest::test_FeeManagement()
    ├─ [0] VM::startPrank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [30737] ERC1967Proxy::setSwapFee(50)
    │   ├─ [25927] VirtualPool::setSwapFee(50) [delegatecall]
    │   │   ├─ emit SwapFeeUpdated(oldFee: 0, newFee: 50)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24259] ERC1967Proxy::setLiquidityFee(10)
    │   ├─ [23949] VirtualPool::setLiquidityFee(10) [delegatecall]
    │   │   ├─ emit LiquidityFeeUpdated(oldFee: 0, newFee: 10)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [854] ERC1967Proxy::swapFee() [staticcall]
    │   ├─ [544] VirtualPool::swapFee() [delegatecall]
    │   │   └─ ← [Return] 50
    │   └─ ← [Return] 50
    ├─ [0] VM::assertEq(50, 50) [staticcall]
    │   └─ ← [Return] 
    ├─ [1184] ERC1967Proxy::liquidityFee() [staticcall]
    │   ├─ [874] VirtualPool::liquidityFee() [delegatecall]
    │   │   └─ ← [Return] 10
    │   └─ ← [Return] 10
    ├─ [0] VM::assertEq(10, 10) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [227576] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0)
    │   ├─ [227230] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 10000000000000000000000 [1e22], amount1: 7500000000000000000000 [7.5e21], liquidity: 8660254037844386467637 [8.66e21])
    │   │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [119895] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0)
    │   ├─ [119567] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0) [delegatecall]
    │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [23408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   │   │   ├─ [23086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [45943] ERC1967Proxy::transfer(ECPairing: [0x0000000000000000000000000000000000000008], 500000000000000000 [5e17])
    │   │   │   ├─ [45627] RwaToken::transfer(ECPairing: [0x0000000000000000000000000000000000000008], 500000000000000000 [5e17]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ECPairing: [0x0000000000000000000000000000000000000008], value: 500000000000000000 [5e17])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [20843] ERC1967Proxy::transfer(ModExp: [0x0000000000000000000000000000000000000005], 73889796524580424773 [7.388e19])
    │   │   │   ├─ [20527] RwaToken::transfer(ModExp: [0x0000000000000000000000000000000000000005], 73889796524580424773 [7.388e19]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ModExp: [0x0000000000000000000000000000000000000005], value: 73889796524580424773 [7.388e19])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit Swap(user: ModExp: [0x0000000000000000000000000000000000000005], tokenIn: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], tokenOut: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amountIn: 100000000000000000000 [1e20], amountOut: 73889796524580424773 [7.388e19])
    │   │   └─ ← [Return] 73889796524580424773 [7.388e19]
    │   └─ ← [Return] 73889796524580424773 [7.388e19]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] 500000000000000000 [5e17]
    │   └─ ← [Return] 500000000000000000 [5e17]
    ├─ [0] VM::assertEq(500000000000000000 [5e17], 500000000000000000 [5e17]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_GetAmountOut() (gas: 358254)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [358254] VirtualPoolTest::test_GetAmountOut()
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [234053] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0)
    │   ├─ [229207] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 10000000000000000000000 [1e22], amount1: 7500000000000000000000 [7.5e21], liquidity: 8660254037844386467637 [8.66e21])
    │   │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [4381] ERC1967Proxy::getAmountOut(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20]) [staticcall]
    │   ├─ [4059] VirtualPool::getAmountOut(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20]) [delegatecall]
    │   │   └─ ← [Return] 74257425742574257425 [7.425e19]
    │   └─ ← [Return] 74257425742574257425 [7.425e19]
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [73463] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0)
    │   ├─ [73135] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0) [delegatecall]
    │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [23408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   │   │   ├─ [23086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [20843] ERC1967Proxy::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19])
    │   │   │   ├─ [20527] RwaToken::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ModExp: [0x0000000000000000000000000000000000000005], value: 74257425742574257425 [7.425e19])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit Swap(user: ModExp: [0x0000000000000000000000000000000000000005], tokenIn: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], tokenOut: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amountIn: 100000000000000000000 [1e20], amountOut: 74257425742574257425 [7.425e19])
    │   │   └─ ← [Return] 74257425742574257425 [7.425e19]
    │   └─ ← [Return] 74257425742574257425 [7.425e19]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(74257425742574257425 [7.425e19], 74257425742574257425 [7.425e19]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_PairCreation() (gas: 1923006)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [1923006] VirtualPoolTest::test_PairCreation()
    ├─ [1433808] → new RwaToken@0x15cF58144EF33af1e14b5208015d11F9143E27b9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x212224D2F2d262cd093eE13240ca4873fcCBbA3C
    │   ├─ emit Upgraded(implementation: RwaToken: [0x15cF58144EF33af1e14b5208015d11F9143E27b9])
    │   ├─ [139188] RwaToken::initialize("Hong Kong Dollar", "HKD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [31029] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C])
    │   ├─ [26219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [174877] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C])
    │   ├─ [174561] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x97A24263efb0F015d3f1299589c6af1437cC50E6, pairId: 1)
    │   │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    ├─ [0] VM::assertTrue(true) [staticcall]
    │   └─ ← [Return] 
    ├─ [1780] ERC1967Proxy::getPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C]) [staticcall]
    │   ├─ [1464] VirtualPool::getPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C]) [delegatecall]
    │   │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    ├─ [0] VM::assertEq(0x97A24263efb0F015d3f1299589c6af1437cC50E6, 0x97A24263efb0F015d3f1299589c6af1437cC50E6) [staticcall]
    │   └─ ← [Return] 
    ├─ [1780] ERC1967Proxy::getPair(ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C], ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1464] VirtualPool::getPair(ERC1967Proxy: [0x212224D2F2d262cd093eE13240ca4873fcCBbA3C], ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    │   └─ ← [Return] 0x97A24263efb0F015d3f1299589c6af1437cC50E6
    ├─ [0] VM::assertEq(0x97A24263efb0F015d3f1299589c6af1437cC50E6, 0x97A24263efb0F015d3f1299589c6af1437cC50E6) [staticcall]
    │   └─ ← [Return] 
    ├─ [876] ERC1967Proxy::allPairsLength() [staticcall]
    │   ├─ [566] VirtualPool::allPairsLength() [delegatecall]
    │   │   └─ ← [Return] 2
    │   └─ ← [Return] 2
    ├─ [0] VM::assertEq(2, 2) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_PairCreation_SameToken() (gas: 24675)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [24675] VirtualPoolTest::test_PairCreation_SameToken()
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(InvalidTokenPair())
    │   └─ ← [Return] 
    ├─ [10583] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [5766] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Revert] InvalidTokenPair()
    │   └─ ← [Revert] InvalidTokenPair()
    └─ ← [Return] 

[PASS] test_PairCreation_UnsupportedToken() (gas: 26034)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [26034] VirtualPoolTest::test_PairCreation_UnsupportedToken()
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(UnsupportedToken())
    │   └─ ← [Return] 
    ├─ [12561] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 0x0000000000000000000000000000000000000064)
    │   ├─ [7744] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 0x0000000000000000000000000000000000000064) [delegatecall]
    │   │   └─ ← [Revert] UnsupportedToken()
    │   └─ ← [Revert] UnsupportedToken()
    └─ ← [Return] 

[PASS] test_Pause() (gas: 370202)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [370202] VirtualPoolTest::test_Pause()
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [234053] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0)
    │   ├─ [229207] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 10000000000000000000000 [1e22], amount1: 7500000000000000000000 [7.5e21], liquidity: 8660254037844386467637 [8.66e21])
    │   │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24603] ERC1967Proxy::pause()
    │   ├─ [24296] VirtualPool::pause() [delegatecall]
    │   │   ├─ emit Paused(account: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(EnforcedPause())
    │   └─ ← [Return] 
    ├─ [1725] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0)
    │   ├─ [1396] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0) [delegatecall]
    │   │   └─ ← [Revert] EnforcedPause()
    │   └─ ← [Revert] EnforcedPause()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [2191] ERC1967Proxy::unpause()
    │   ├─ [1884] VirtualPool::unpause() [delegatecall]
    │   │   ├─ emit Unpaused(account: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [75463] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0)
    │   ├─ [75135] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0) [delegatecall]
    │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [23408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   │   │   ├─ [23086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [20843] ERC1967Proxy::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19])
    │   │   │   ├─ [20527] RwaToken::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ModExp: [0x0000000000000000000000000000000000000005], value: 74257425742574257425 [7.425e19])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit Swap(user: ModExp: [0x0000000000000000000000000000000000000005], tokenIn: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], tokenOut: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amountIn: 100000000000000000000 [1e20], amountOut: 74257425742574257425 [7.425e19])
    │   │   └─ ← [Return] 74257425742574257425 [7.425e19]
    │   └─ ← [Return] 74257425742574257425 [7.425e19]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_Quote() (gas: 14322)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [14322] VirtualPoolTest::test_Quote()
    ├─ [6097] ERC1967Proxy::quote(100000000000000000000 [1e20], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21]) [staticcall]
    │   ├─ [1275] VirtualPool::quote(100000000000000000000 [1e20], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   └─ ← [Return] 74036852579779597413 [7.403e19]
    │   └─ ← [Return] 74036852579779597413 [7.403e19]
    ├─ [0] VM::assertEq(74036852579779597413 [7.403e19], 74036852579779597413 [7.403e19]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_RemoveLiquidity() (gas: 332750)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [332750] VirtualPoolTest::test_RemoveLiquidity()
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [233543] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0)
    │   ├─ [228697] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 1000000000000000000000 [1e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 1000000000000000000000 [1e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 750000000000000000000 [7.5e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 750000000000000000000 [7.5e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 1000000000000000000000 [1e21], amount1: 750000000000000000000 [7.5e20], liquidity: 866025403784438646763 [8.66e20])
    │   │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    │   └─ ← [Return] 1000000000000000000000 [1e21], 750000000000000000000 [7.5e20], 866025403784438646763 [8.66e20]
    ├─ [923] ERC1967Proxy::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] 999000000000000000000000 [9.99e23]
    │   └─ ← [Return] 999000000000000000000000 [9.99e23]
    ├─ [923] ERC1967Proxy::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] 999250000000000000000000 [9.992e23]
    │   └─ ← [Return] 999250000000000000000000 [9.992e23]
    ├─ [51228] ERC1967Proxy::removeLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 433012701892219323381 [4.33e20], 0, 0)
    │   ├─ [50891] VirtualPool::removeLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 433012701892219323381 [4.33e20], 0, 0) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [16043] ERC1967Proxy::transfer(Identity: [0x0000000000000000000000000000000000000004], 499999999999999999999 [4.999e20])
    │   │   │   ├─ [15727] RwaToken::transfer(Identity: [0x0000000000000000000000000000000000000004], 499999999999999999999 [4.999e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: Identity: [0x0000000000000000000000000000000000000004], value: 499999999999999999999 [4.999e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [16043] ERC1967Proxy::transfer(Identity: [0x0000000000000000000000000000000000000004], 374999999999999999999 [3.749e20])
    │   │   │   ├─ [15727] RwaToken::transfer(Identity: [0x0000000000000000000000000000000000000004], 374999999999999999999 [3.749e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: Identity: [0x0000000000000000000000000000000000000004], value: 374999999999999999999 [3.749e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityRemoved(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 499999999999999999999 [4.999e20], amount1: 374999999999999999999 [3.749e20], liquidity: 433012701892219323381 [4.33e20])
    │   │   └─ ← [Return] 499999999999999999999 [4.999e20], 374999999999999999999 [3.749e20]
    │   └─ ← [Return] 499999999999999999999 [4.999e20], 374999999999999999999 [3.749e20]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] 999499999999999999999999 [9.994e23]
    │   └─ ← [Return] 999499999999999999999999 [9.994e23]
    ├─ [923] ERC1967Proxy::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] 999624999999999999999999 [9.996e23]
    │   └─ ← [Return] 999624999999999999999999 [9.996e23]
    ├─ [0] VM::assertEq(499999999999999999999 [4.999e20], 499999999999999999999 [4.999e20]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertEq(374999999999999999999 [3.749e20], 374999999999999999999 [3.749e20]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertApproxEqRel(499999999999999999999 [4.999e20], 500000000000000000000 [5e20], 10000000000000000 [1e16]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertApproxEqRel(374999999999999999999 [3.749e20], 375000000000000000000 [3.75e20], 10000000000000000 [1e16]) [staticcall]
    │   └─ ← [Return] 
    ├─ [2501] ERC1967Proxy::getReserves(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [2182] VirtualPool::getReserves(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] 500000000000000000001 [5e20], 375000000000000000001 [3.75e20]
    │   └─ ← [Return] 500000000000000000001 [5e20], 375000000000000000001 [3.75e20]
    ├─ [0] VM::assertApproxEqRel(500000000000000000001 [5e20], 500000000000000000000 [5e20], 10000000000000000 [1e16]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertApproxEqRel(375000000000000000001 [3.75e20], 375000000000000000000 [3.75e20], 10000000000000000 [1e16]) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_Swap() (gas: 374275)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [374275] VirtualPoolTest::test_Swap()
    ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [5894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [223053] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0)
    │   ├─ [218207] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 10000000000000000000000 [1e22], amount1: 7500000000000000000000 [7.5e21], liquidity: 8660254037844386467637 [8.66e21])
    │   │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [2923] ERC1967Proxy::balanceOf(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [2610] RwaToken::balanceOf(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] 1000000000000000000000000 [1e24]
    │   └─ ← [Return] 1000000000000000000000000 [1e24]
    ├─ [0] VM::startPrank(ModExp: [0x0000000000000000000000000000000000000005])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ModExp: [0x0000000000000000000000000000000000000005], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [69463] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 70000000000000000000 [7e19])
    │   ├─ [69135] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 70000000000000000000 [7e19]) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [23408] ERC1967Proxy::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   │   │   ├─ [23086] RwaToken::transferFrom(ModExp: [0x0000000000000000000000000000000000000005], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ModExp: [0x0000000000000000000000000000000000000005], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [18843] ERC1967Proxy::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19])
    │   │   │   ├─ [18527] RwaToken::transfer(ModExp: [0x0000000000000000000000000000000000000005], 74257425742574257425 [7.425e19]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], to: ModExp: [0x0000000000000000000000000000000000000005], value: 74257425742574257425 [7.425e19])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit Swap(user: ModExp: [0x0000000000000000000000000000000000000005], tokenIn: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], tokenOut: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amountIn: 100000000000000000000 [1e20], amountOut: 74257425742574257425 [7.425e19])
    │   │   └─ ← [Return] 74257425742574257425 [7.425e19]
    │   └─ ← [Return] 74257425742574257425 [7.425e19]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [923] ERC1967Proxy::balanceOf(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [610] RwaToken::balanceOf(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] 1000074257425742574257425 [1e24]
    │   └─ ← [Return] 1000074257425742574257425 [1e24]
    ├─ [0] VM::assertEq(74257425742574257425 [7.425e19], 74257425742574257425 [7.425e19]) [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::assertTrue(true) [staticcall]
    │   └─ ← [Return] 
    ├─ [854] ERC1967Proxy::swapFee() [staticcall]
    │   ├─ [544] VirtualPool::swapFee() [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [2923] ERC1967Proxy::balanceOf(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [2610] RwaToken::balanceOf(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::assertEq(0, 0) [staticcall]
    │   └─ ← [Return] 
    └─ ← [Return] 

[PASS] test_Swap_BlacklistedUser() (gas: 434945)
Traces:
  [11919776] VirtualPoolTest::setUp()
    ├─ [1480812] → new BlockVirtualGovernance@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7280 bytes of code
    ├─ [2345385] → new VirtualPool@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 11377 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xF62849F9A0B5Bf2913b396098F7c7019b51A820a
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [1433808] → new RwaToken@0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [1433808] → new RwaToken@0xc7183455a4C133Ae270771860664b6B7ec320bB1
    │   ├─ emit Initialized(version: 18446744073709551615 [1.844e19])
    │   └─ ← [Return] 7045 bytes of code
    ├─ [124800] → new ERC1967Proxy@0xa0Cb889707d426A7A386870A03bc70d1b0697598
    │   ├─ emit Upgraded(implementation: BlockVirtualGovernance: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f])
    │   ├─ [73435] BlockVirtualGovernance::initialize() [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [73803] ERC1967Proxy::setupRoleAdmins()
    │   ├─ [73496] BlockVirtualGovernance::setupRoleAdmins() [delegatecall]
    │   │   ├─ emit RoleAdminChanged(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x442a94f1a1fac79af32856af2a64f63648cfa2ef3b98610a5bb7cbec4cee6985, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775)
    │   │   ├─ emit RoleAdminChanged(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, previousAdminRole: 0x0000000000000000000000000000000000000000000000000000000000000000, newAdminRole: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [916] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [606] BlockVirtualGovernance::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27937] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27624] BlockVirtualGovernance::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [564] ERC1967Proxy::REGULATOR_ROLE() [staticcall]
    │   ├─ [254] BlockVirtualGovernance::REGULATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    │   └─ ← [Return] 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6
    ├─ [25937] ERC1967Proxy::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25624] BlockVirtualGovernance::grantRole(0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x20b5f7ac978e5d6199de06401411960dfa81d2f762655f6206bdc61d46fc19e6, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [25866] ERC1967Proxy::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [25556] BlockVirtualGovernance::grantOperatorRole(SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23437] ERC1967Proxy::addSupportedCountryCode(702)
    │   ├─ [23127] BlockVirtualGovernance::addSupportedCountryCode(702) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [221514] → new ERC1967Proxy@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   ├─ emit Upgraded(implementation: VirtualPool: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [170060] VirtualPool::initialize(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   ├─ emit Upgraded(implementation: RwaToken: [0x5991A2dF15A8F6A256D3Ec51E99254Cd3fb576A9])
    │   ├─ [139188] RwaToken::initialize("Singapore Dollar", "SGD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [191266] → new ERC1967Proxy@0x03A6a84cD762D9707A21605b548aaaB891562aAb
    │   ├─ emit Upgraded(implementation: RwaToken: [0xc7183455a4C133Ae270771860664b6B7ec320bB1])
    │   ├─ [139188] RwaToken::initialize("US Dollar", "USD", ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 702) [delegatecall]
    │   │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   ├─ emit Initialized(version: 1)
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 134 bytes of code
    ├─ [619929] → new BlockVirtualPriceFeed@0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF
    │   ├─ emit RoleGranted(role: 0x0000000000000000000000000000000000000000000000000000000000000000, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 2730 bytes of code
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [69898] ERC1967Proxy::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [69588] BlockVirtualGovernance::registerPool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolRegistered(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], registrar: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [3821] ERC1967Proxy::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   ├─ [3511] BlockVirtualGovernance::activatePool(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   ├─ emit PoolActivated(pool: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], activator: ECRecover: [0x0000000000000000000000000000000000000001])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [114719] ERC1967Proxy::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702)
    │   ├─ [114400] BlockVirtualGovernance::registerKYCUser(Identity: [0x0000000000000000000000000000000000000004], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ModExp: [0x0000000000000000000000000000000000000005], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECPairing: [0x0000000000000000000000000000000000000008], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ECRecover: [0x0000000000000000000000000000000000000001], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(RIPEMD-160: [0x0000000000000000000000000000000000000003], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(SHA-256: [0x0000000000000000000000000000000000000002], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [2919] ERC1967Proxy::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702)
    │   ├─ [2600] BlockVirtualGovernance::registerKYCUser(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [112719] ERC1967Proxy::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702)
    │   ├─ [112400] BlockVirtualGovernance::registerKYCUser(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User1 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User2 should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "FeeCollector should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "Pool proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "SGD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [staticcall]
    │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "USD token proxy should have valid KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [3432] ERC1967Proxy::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [staticcall]
    │   ├─ [3119] BlockVirtualGovernance::getKycStatus(ECAdd: [0x0000000000000000000000000000000000000006]) [delegatecall]
    │   │   └─ ← [Return] false
    │   └─ ← [Return] false
    ├─ [0] VM::assertFalse(false, "Non-KYC user should not have KYC") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [971] ERC1967Proxy::ADMIN_ROLE() [staticcall]
    │   ├─ [661] VirtualPool::ADMIN_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27761] ERC1967Proxy::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ [27448] VirtualPool::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [487] ERC1967Proxy::FEE_MANAGER_ROLE() [staticcall]
    │   ├─ [177] VirtualPool::FEE_MANAGER_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    │   └─ ← [Return] 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c
    ├─ [27761] ERC1967Proxy::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   ├─ [27448] VirtualPool::grantRole(0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, RIPEMD-160: [0x0000000000000000000000000000000000000003]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x6c0757dc3e6b28b2580c03fd9e96c274acf4f99d91fbec9b418fa1d70604ff1c, account: RIPEMD-160: [0x0000000000000000000000000000000000000003], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1367] ERC1967Proxy::OPERATOR_ROLE() [staticcall]
    │   ├─ [1057] VirtualPool::OPERATOR_ROLE() [delegatecall]
    │   │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    │   └─ ← [Return] 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929
    ├─ [27761] ERC1967Proxy::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ [27448] VirtualPool::grantRole(0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, SHA-256: [0x0000000000000000000000000000000000000002]) [delegatecall]
    │   │   ├─ emit RoleGranted(role: 0x97667070c54ef182b0f5858b034beac1b6f3089aa2d3188bb1e8929f4fa9b929, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [397] BlockVirtualPriceFeed::ADMIN_ROLE() [staticcall]
    │   └─ ← [Return] 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, ECRecover: [0x0000000000000000000000000000000000000001])
    │   ├─ emit RoleGranted(role: 0xa49807205ce4d355092ef5a8a18f56e8913cf4a201fbe287825b095693c21775, account: ECRecover: [0x0000000000000000000000000000000000000001], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [526] BlockVirtualPriceFeed::PRICE_UPDATER_ROLE() [staticcall]
    │   └─ ← [Return] 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0
    ├─ [27328] BlockVirtualPriceFeed::grantRole(0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, SHA-256: [0x0000000000000000000000000000000000000002])
    │   ├─ emit RoleGranted(role: 0xd96ba01d6560c2ab35f2940dd8d70c5f5fe06236c72674237120515918198fb0, account: SHA-256: [0x0000000000000000000000000000000000000002], sender: VirtualPoolTest: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [23369] ERC1967Proxy::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF])
    │   ├─ [23059] VirtualPool::setPriceFeed(BlockVirtualPriceFeed: [0xD6BbDE9174b1CdAa358d2Cf4D57D1a9F7178FBfF]) [delegatecall]
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [68477] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [46577] BlockVirtualPriceFeed::registerToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ emit TokenRegistered(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], 750000000000000000 [7.5e17])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], price: 750000000000000000 [7.5e17], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [46921] BlockVirtualPriceFeed::updatePrice(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 1000000000000000000 [1e18])
    │   ├─ emit PriceUpdated(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], price: 1000000000000000000 [1e18], timestamp: 1)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [24529] ERC1967Proxy::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [24219] VirtualPool::addSupportedToken(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit TokenAdded(token: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(ECRecover: [0x0000000000000000000000000000000000000001])
    │   └─ ← [Return] 
    ├─ [189977] ERC1967Proxy::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb])
    │   ├─ [189661] VirtualPool::createPair(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb]) [delegatecall]
    │   │   ├─ emit PairCreated(token0: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], token1: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], pairToken: 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd, pairId: 0)
    │   │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    │   └─ ← [Return] 0x7E3acA2B515262af0003D10C7A3c9B7395629bAd
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [50842] ERC1967Proxy::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24])
    │   ├─ [50529] RwaToken::mintRwa(Identity: [0x0000000000000000000000000000000000000004], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: Identity: [0x0000000000000000000000000000000000000004], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [28942] ERC1967Proxy::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24])
    │   ├─ [28629] RwaToken::mintRwa(ModExp: [0x0000000000000000000000000000000000000005], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ModExp: [0x0000000000000000000000000000000000000005]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ModExp: [0x0000000000000000000000000000000000000005], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(RIPEMD-160: [0x0000000000000000000000000000000000000003])
    │   └─ ← [Return] 
    ├─ [25097] ERC1967Proxy::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008])
    │   ├─ [24787] VirtualPool::setFeeCollector(ECPairing: [0x0000000000000000000000000000000000000008]) [delegatecall]
    │   │   ├─ emit FeeCollectorSet(oldCollector: 0x0000000000000000000000000000000000000000, newCollector: ECPairing: [0x0000000000000000000000000000000000000008])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    └─ ← [Return] 

  [434945] VirtualPoolTest::test_Swap_BlacklistedUser()
    ├─ [0] VM::startPrank(Identity: [0x0000000000000000000000000000000000000004])
    │   └─ ← [Return] 
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29189] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   ├─ emit Approval(owner: Identity: [0x0000000000000000000000000000000000000004], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [234053] ERC1967Proxy::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0)
    │   ├─ [229207] VirtualPool::addLiquidity(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 0, 0) [delegatecall]
    │   │   ├─ [10394] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ [57308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22])
    │   │   │   ├─ [56986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 10000000000000000000000 [1e22]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [5581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [5541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [5228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [3541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [3228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 10000000000000000000000 [1e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [47308] ERC1967Proxy::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21])
    │   │   │   ├─ [46986] RwaToken::transferFrom(Identity: [0x0000000000000000000000000000000000000004], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 7500000000000000000000 [7.5e21]) [delegatecall]
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1541] ERC1967Proxy::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [1228] BlockVirtualGovernance::isFromSupportedCountry(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [staticcall]
    │   │   │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], Identity: [0x0000000000000000000000000000000000000004]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [staticcall]
    │   │   │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]) [delegatecall]
    │   │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   │   └─ ← [Return] false
    │   │   │   │   ├─ emit Transfer(from: Identity: [0x0000000000000000000000000000000000000004], to: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 7500000000000000000000 [7.5e21])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ emit LiquidityAdded(user: Identity: [0x0000000000000000000000000000000000000004], token0: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], token1: ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], amount0: 10000000000000000000000 [1e22], amount1: 7500000000000000000000 [7.5e21], liquidity: 8660254037844386467637 [8.66e21])
    │   │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    │   └─ ← [Return] 10000000000000000000000 [1e22], 7500000000000000000000 [7.5e21], 8660254037844386467637 [8.66e21]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [17219] ERC1967Proxy::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702)
    │   ├─ [16900] BlockVirtualGovernance::registerKYCUser(ECMul: [0x0000000000000000000000000000000000000007], 31536001 [3.153e7], 702) [delegatecall]
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ERC1967Proxy: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   └─ ← [Return] 
    ├─ [33742] ERC1967Proxy::mintRwa(ECMul: [0x0000000000000000000000000000000000000007], 1000000000000000000000000 [1e24])
    │   ├─ [33429] RwaToken::mintRwa(ECMul: [0x0000000000000000000000000000000000000007], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ECMul: [0x0000000000000000000000000000000000000007], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [33742] ERC1967Proxy::mintRwa(ECMul: [0x0000000000000000000000000000000000000007], 1000000000000000000000000 [1e24])
    │   ├─ [33429] RwaToken::mintRwa(ECMul: [0x0000000000000000000000000000000000000007], 1000000000000000000000000 [1e24]) [delegatecall]
    │   │   ├─ [3202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ECMul: [0x0000000000000000000000000000000000000007]) [staticcall]
    │   │   │   ├─ [2886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   │   │   └─ ← [Return] false
    │   │   │   └─ ← [Return] false
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: ECMul: [0x0000000000000000000000000000000000000007], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] 
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(SHA-256: [0x0000000000000000000000000000000000000002])
    │   └─ ← [Return] 
    ├─ [23461] ERC1967Proxy::addBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007])
    │   ├─ [23148] BlockVirtualGovernance::addBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   ├─ emit UserBlacklisted(token: ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], user: ECMul: [0x0000000000000000000000000000000000000007], operator: SHA-256: [0x0000000000000000000000000000000000000002])
    │   │   └─ ← [Stop] 
    │   └─ ← [Return] 
    ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [staticcall]
    │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::assertTrue(true, "User should be blacklisted") [staticcall]
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(ECMul: [0x0000000000000000000000000000000000000007])
    │   └─ ← [Return] 
    ├─ [24689] ERC1967Proxy::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20])
    │   ├─ [24373] RwaToken::approve(ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], 100000000000000000000 [1e20]) [delegatecall]
    │   │   ├─ emit Approval(owner: ECMul: [0x0000000000000000000000000000000000000007], spender: ERC1967Proxy: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211], value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(Blacklisted(0x0000000000000000000000000000000000000007))
    │   └─ ← [Return] 
    ├─ [9476] ERC1967Proxy::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0)
    │   ├─ [9144] VirtualPool::swap(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ERC1967Proxy: [0x03A6a84cD762D9707A21605b548aaaB891562aAb], 100000000000000000000 [1e20], 0) [delegatecall]
    │   │   ├─ [1894] ERC1967Proxy::getKycStatus(ECMul: [0x0000000000000000000000000000000000000007]) [staticcall]
    │   │   │   ├─ [1581] BlockVirtualGovernance::getKycStatus(ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [1202] ERC1967Proxy::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [staticcall]
    │   │   │   ├─ [886] BlockVirtualGovernance::isBlacklisted(ERC1967Proxy: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c], ECMul: [0x0000000000000000000000000000000000000007]) [delegatecall]
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Revert] Blacklisted(0x0000000000000000000000000000000000000007)
    │   └─ ← [Revert] Blacklisted(0x0000000000000000000000000000000000000007)
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Return] 

Suite result: ok. 14 passed; 0 failed; 0 skipped; finished in 4.00ms (4.86ms CPU time)

Ran 1 test suite in 1.65s (4.00ms CPU time): 14 tests passed, 0 failed, 0 skipped (14 total tests)
